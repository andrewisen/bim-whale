var BIMWHALE;BIMWHALE=(()=>{"use strict";var t={310:(t,e,n)=>{function i(){for(var t=this.lines.length,e=0;e<t;e++){var n=this.lines[e];if(-1!==n.indexOf("=")){var i=this.generateStepEntityInstance(n);void 0!==i&&this.saveStepEntityInstance(i)}}}n.r(e),n.d(e,{IfcFile:()=>m});var r=function(t){return t.slice(1,-1)},s=function(t){return t.replace(/\\/g,"").replace(/\//g,"\\/").replace(/\"/g,'\\"')},a=function(t){var e=t.line,n=t.entityInstance;return function(t,e,n,i,a){var c,o;void 0===n&&(n=""),void 0===i&&(i=!1),void 0===a&&(a="");var u=t;t=(c=function(t,e,n){return"IFCPROPERTYSINGLEVALUE"!==e&&(n=t.substr(0,t.indexOf(",")),t=t.substr(t.indexOf(","))),{attributeString:t,globalId:n}}(u,e,n)).attributeString,n=c.globalId,t=(o=function(t,e,n){return(n=/(IFC[A-Z]+\()(.*)(\)\,)/g.exec(t))&&(e=!0,n=s(n[2]),t=t.replace(/(IFC[A-Z]+\()(.*)(\)\,)/g,'"$1{PARAM})",')),{attributeString:t,functionParameter:n,hasFunction:e}}(t=function(t){return","+t+","}(t),i,a)).attributeString,a=o.functionParameter,i=o.hasFunction,t=function(t,e,n,i){return n&&(t="IFCPROPERTYSINGLEVALUE"!==e?t.replace(/(IFC[A-Z]+\()(\{PARAM\})(\)\"\,)/g,"$1"+i+')",'):t.replace(/(IFC[A-Z]+\()(\{PARAM\})(\)\"\,)/g,i.replace(/^\'(.+)\'/g,"$1")+'",')),t}(t=function(t){return t.replace(/\\/g,"").replace(/\//g,"\\/").replace(/\$/g,'"$"').replace(/(^|,)\((#\d+.*?)\)/g,"$1[$2]").replace(/([,\[])(#\d+)+/g,'$1"$2"').replace(/,(\d+[.]\d*)/g,",'$1'").replace(/(\(|\,)(\..+\.)(\)|\,)/g,"$1'$2'$3").replace(/'/g,'"')}(t),e,i,a),t=function(t,e,n){return"IFCPROPERTYSINGLEVALUE"!==t&&(e='"'+n+'"'+e),e}(e,t=r(t),n=r(n));var l=[];try{l=JSON.parse("["+t+"]")}catch(e){console.log("Parsing error:"),console.log("In:",u),console.log("Out:",t),console.log(" "),l=["N/A"]}return l}(e.substring(n.entityStartIndex+1,e.length-2),n.entityName)};function c(t){var e={instanceStartIndex:0,instanceEndIndex:t.indexOf("="),instanceName:"",entityStartIndex:t.indexOf("("),entityEndIndex:-1,entityName:""};if(function(t){var e=t.line,n=t.entityInstance.instanceEndIndex;t.entityInstance.instanceName=e.substring(0,n)}({line:t,entityInstance:e}),function(t){var e=t.line,n=t.entityInstance.instanceEndIndex,i=t.entityInstance.entityStartIndex;t.entityInstance.entityName=e.substring(n+2,i)}({line:t,entityInstance:e}),e.entityName in this.allEntities!=0)return function(t){t.line;var e=t.parsedAttributes;t.entityInstance.attributes={parsed:e}}({line:t,entityInstance:e,parsedAttributes:a({line:t,entityInstance:e})}),e}function o(t){var e,n;t.entityName in this.requiredEntities?Object.assign(this.entityInstances[this.requiredEntities[t.entityName]],((e={})[t.instanceName]={entityName:t.entityName,attributes:t.attributes},e)):Object.assign(this.entityInstances.genericEntityInstances,((n={})[t.instanceName]={entityName:this.selectedEntities[t.entityName],instanceName:t.instanceName,attributes:t.attributes,properties:{}},n))}function u(){return this.parseStepFile(),this.mapPropertySingleValuesToPropertySet(),this.mapPropertySetsToGenericEntities(),this.entityInstances.genericEntityInstances}function l(){var t=this;Object.values(this.entityInstances.IfcPropertySet).forEach((function(e){var n=p(e),i=f(t,n);y(e,i)}))}var p=function(t){return t.attributes.parsed[4]},f=function(t,e){var n={};return e.forEach((function(e){var i=(t.entityInstances.IfcPropertySingleValue[e]||{}).attributes,r=(void 0===i?{parsed:void 0}:i).parsed;"undefined"!==r&&(n[r[0]]=r[2])})),n},y=function(t,e){var n=function(t){return t.attributes.parsed[2]}(t);Object.assign(t,{ifcPropertySetName:n,ifcPropertySet:e})};function d(){var t=this,e=this.selectedPropertySets.length>0,n=this.selectedPropertySets;Object.values(this.entityInstances.IfcRelDefinesByProperties).forEach((function(i){var r=v(i),s=g(t,r);if(!h(s,e,n)){var a=b(i),c=S(t,a);void 0!==c&&E(s,c)}}))}var I,v=function(t){return t.attributes.parsed[5]},g=function(t,e){var n=t.entityInstances.IfcPropertySet[e]||{},i=n.ifcPropertySetName,r=void 0===i?void 0:i,s=n.ifcPropertySet;if(void 0!==r)return{name:r,ifcPropertySet:void 0===s?void 0:s}},h=function(t,e,n){return void 0===t||!(!e||!1!==n.includes(t.name))},b=function(t){return t.attributes.parsed[4]},S=function(t,e){var n=(t.entityInstances.genericEntityInstances[e[0]]||{}).properties;return void 0===n?void 0:n},E=function(t,e){var n;Object.assign(e,((n={})[t.name]=t.ifcPropertySet,n))},P=(I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}I(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapPropertySingleValuesToPropertySet=l,e.mapPropertySetsToGenericEntities=d,e.parseIfcFile=u,e}return P(e,t),e}((function(t,e){var n=this;this.parseStepFile=i,this.generateStepEntityInstance=c,this.saveStepEntityInstance=o,this.lines=t,this.entityInstances={},this.requiredEntities=e.requiredEntities,this.selectedEntities=e.selectedEntities,this.selectedPropertySets=e.selectedPropertySets,this.allEntities=e.allEntities,Object.values(e.requiredEntities).forEach((function(t){var e;Object.assign(n.entityInstances,((e={})[t]={},e))})),Object.assign(this.entityInstances,{genericEntityInstances:{}})}))}},e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}return n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(310)})();