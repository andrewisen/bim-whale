var BIMWHALE;BIMWHALE=(()=>{"use strict";var e={627:(e,t,i)=>{function r(){for(var e=this.lines.length,t=0;t<e;t++){var i=this.lines[t];-1!=i.indexOf("=")&&this.generateStepInstance(i)}}function n(e){var t,i,r={};r.instanceEndIndex=e.indexOf("="),r.entityStartIndex=e.indexOf("("),r.instanceId=e.substring(1,r.instanceEndIndex),r.entityName=e.substring(r.instanceEndIndex+2,r.entityStartIndex),this.allEntities.includes(r.entityName)&&(r.attributes={parsed:this.parseStepInstanceAttributes(e.substring(r.entityStartIndex+1,e.length-2),r.entityName)},this.requiredEntities.includes(r.entityName)?Object.assign(this.entities[r.entityName],((t={})[r.instanceId]={entityName:r.entityName,attributes:r.attributes},t)):Object.assign(this.entities.genericEntities,((i={})[r.instanceId]={entityName:r.entityName,instanceId:r.instanceId,attributes:r.attributes,properties:{}},i)))}function s(e,t){var i="",r="";"IFCPROPERTYSINGLEVALUE"!==t?(r=e.substr(0,e.indexOf(",")),i=e.substr(e.indexOf(","))):i=e;var n=!1,s=/(IFC[A-Z]+\()(.*)(\)\,)/g.exec(i=","+i+",");s&&(n=!0,s=s[2].replace(/\\/g,"").replace(/\//g,"\\/").replace(/\"/g,'\\"'),i=i.replace(/(IFC[A-Z]+\()(.*)(\)\,)/g,'"$1{PARAM})",')),i=i.replace(/\\/g,"").replace(/\//g,"\\/").replace(/\$/g,'"$"').replace(/(^|,)\((#\d+.*?)\)/g,"$1[$2]").replace(/([,\[])(#\d+)+/g,'$1"$2"').replace(/,(\d+[.]\d*)/g,",'$1'").replace(/(\(|\,)(\..+\.)(\)|\,)/g,"$1'$2'$3").replace(/'/g,'"'),n&&(i="IFCPROPERTYSINGLEVALUE"!==t?i.replace(/(IFC[A-Z]+\()(\{PARAM\})(\)\"\,)/g,"$1"+s+')",'):i.replace(/(IFC[A-Z]+\()(\{PARAM\})(\)\"\,)/g,s.slice(1,-1)+'",')),i="IFCPROPERTYSINGLEVALUE"!==t?'"'+r.slice(1,-1)+'"'+i.slice(1,-1):i.slice(1,-1);var a=[];try{a=JSON.parse("["+i+"]")}catch(t){console.log("Parsing error:"),console.log("In:",e),console.log("Out:",i),console.log(" "),a=["N/A"]}return a}function a(){this.parseStepFile(),this.mapPropertySingleValuesToPropertySet(),this.mapPropertySetsToGenericEntities()}function o(){for(var e in this.entities.IFCPROPERTYSET){for(var t=this.entities.IFCPROPERTYSET[e],i=t.attributes.parsed,r=t.properties,n=void 0===r?{}:r,s=i[4].length,a=0;a<s;a++){var o=(this.entities.IFCPROPERTYSINGLEVALUE[i[4][a].slice(1)]||{}).attributes,c=(void 0===o?{parsed:void 0}:o).parsed;void 0!==c&&(n[c[0]]=c[2])}Object.assign(this.entities.IFCPROPERTYSET[e],{ifcPropertySetName:i[2],ifcPropertySet:n})}}function c(){var e;for(var t in this.entities.IFCRELDEFINESBYPROPERTIES){var i=this.entities.IFCRELDEFINESBYPROPERTIES[t].attributes.parsed,r=this.entities.IFCPROPERTYSET[i[5].slice(1)]||{},n=r.ifcPropertySetName,s=void 0===n?void 0:n,a=r.ifcPropertySet,o=void 0===a?void 0:a;if(void 0!==o&&(!(this.selectedPropertySets.length>0)||this.selectedPropertySets.includes(s)))for(var c=i[4].length,p=0;p<c;p++){var l=(this.entities.genericEntities[i[4][p].slice(1)]||{}).properties,d=void 0===l?void 0:l;void 0!==d&&Object.assign(d,((e={})[s]=o,e))}}}i.r(t),i.d(t,{IfcFile:()=>d});var p,l=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mapPropertySingleValuesToPropertySet=o,t.mapPropertySetsToGenericEntities=c,t.parseIfcFile=a,t}return l(t,e),t}((function(e,t){var i=this;this.parseStepFile=r,this.generateStepInstance=n,this.parseStepInstanceAttributes=s,this.lines=e,this.entities={},this.requiredEntities=t.requiredEntities,this.selectedEntities=t.selectedEntities,this.selectedPropertySets=t.selectedPropertySets,this.allEntities=t.allEntities,this.requiredEntities.forEach((function(e){var t;Object.assign(i.entities,((t={})[e]={},t))})),Object.assign(this.entities,{genericEntities:{}})}))}},t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}return i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(627)})();