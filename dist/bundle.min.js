var BIMWHALE;BIMWHALE=(()=>{"use strict";var t={847:(t,e,n)=>{function i(){for(var t=this.lines.length,e=0;e<t;e++){var n=this.lines[e];-1!=n.indexOf("=")&&this.generateStepEntityInstance(n)}}function r(t){var e,n,i={};i.instanceEndIndex=t.indexOf("="),i.entityStartIndex=t.indexOf("("),i.instanceName=t.substring(0,i.instanceEndIndex),i.entityName=t.substring(i.instanceEndIndex+2,i.entityStartIndex),i.entityName in this.allEntities&&(i.attributes={parsed:this.parseStepEntityInstanceAttributes(t.substring(i.entityStartIndex+1,t.length-2),i.entityName)},i.entityName in this.requiredEntities?Object.assign(this.entityInstances[this.requiredEntities[i.entityName]],((e={})[i.instanceName]={entityName:i.entityName,attributes:i.attributes},e)):Object.assign(this.entityInstances.genericEntityInstances,((n={})[i.instanceName]={entityName:this.selectedEntities[i.entityName],instanceName:i.instanceName,attributes:i.attributes,properties:{}},n)))}function s(t,e,n,i,r){var s,f;void 0===n&&(n=""),void 0===i&&(i=!1),void 0===r&&(r="");var d=t;t=(s=a(d,e,n)).attributeString,n=s.globalId,t=c(t),t=(f=u(t,i,r)).attributeString,r=f.functionParameter,i=f.hasFunction,t=y(t),t=l(t,e,i,r),t=p(t),n=p(n),t=o(e,t,n);var g=[];try{g=JSON.parse("["+t+"]")}catch(e){console.log("Parsing error:"),console.log("In:",d),console.log("Out:",t),console.log(" "),g=["N/A"]}return g}n.r(e),n.d(e,{IfcFile:()=>S});var a=function(t,e,n){return"IFCPROPERTYSINGLEVALUE"!==e&&(n=t.substr(0,t.indexOf(",")),t=t.substr(t.indexOf(","))),{attributeString:t,globalId:n}},o=function(t,e,n){return"IFCPROPERTYSINGLEVALUE"!==t&&(e='"'+n+'"'+e),e},c=function(t){return","+t+","},p=function(t){return t.slice(1,-1)},u=function(t,e,n){return(n=/(IFC[A-Z]+\()(.*)(\)\,)/g.exec(t))&&(e=!0,n=f(n[2]),t=t.replace(/(IFC[A-Z]+\()(.*)(\)\,)/g,'"$1{PARAM})",')),{attributeString:t,functionParameter:n,hasFunction:e}},l=function(t,e,n,i){return n&&(t="IFCPROPERTYSINGLEVALUE"!==e?t.replace(/(IFC[A-Z]+\()(\{PARAM\})(\)\"\,)/g,"$1"+i+')",'):t.replace(/(IFC[A-Z]+\()(\{PARAM\})(\)\"\,)/g,i.replace(/^\'(.+)\'/g,"$1")+'",')),t},y=function(t){return t.replace(/\\/g,"").replace(/\//g,"\\/").replace(/\$/g,'"$"').replace(/(^|,)\((#\d+.*?)\)/g,"$1[$2]").replace(/([,\[])(#\d+)+/g,'$1"$2"').replace(/,(\d+[.]\d*)/g,",'$1'").replace(/(\(|\,)(\..+\.)(\)|\,)/g,"$1'$2'$3").replace(/'/g,'"')},f=function(t){return t.replace(/\\/g,"").replace(/\//g,"\\/").replace(/\"/g,'\\"')};function d(){return this.parseStepFile(),this.mapPropertySingleValuesToPropertySet(),this.mapPropertySetsToGenericEntities(),this.entityInstances.genericEntityInstances}function g(){for(var t in this.entityInstances.IfcPropertySet){for(var e=this.entityInstances.IfcPropertySet[t],n=e.attributes.parsed,i=e.properties,r=void 0===i?{}:i,s=n[4].length,a=0;a<s;a++){var o=(this.entityInstances.IfcPropertySingleValue[n[4][a]]||{}).attributes,c=(void 0===o?{parsed:void 0}:o).parsed;void 0!==c&&(r[c[0]]=c[2])}Object.assign(this.entityInstances.IfcPropertySet[t],{ifcPropertySetName:n[2],ifcPropertySet:r})}}function I(){var t;for(var e in this.entityInstances.IfcRelDefinesByProperties){var n=this.entityInstances.IfcRelDefinesByProperties[e].attributes.parsed,i=this.entityInstances.IfcPropertySet[n[5]]||{},r=i.ifcPropertySetName,s=void 0===r?void 0:r,a=i.ifcPropertySet,o=void 0===a?void 0:a;if(void 0!==o&&(!(this.selectedPropertySets.length>0)||this.selectedPropertySets.includes(s)))for(var c=n[4].length,p=0;p<c;p++){var u=(this.entityInstances.genericEntityInstances[n[4][p]]||{}).properties,l=void 0===u?void 0:u;void 0!==l&&Object.assign(l,((t={})[s]=o,t))}}}var h,v=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mapPropertySingleValuesToPropertySet=g,e.mapPropertySetsToGenericEntities=I,e.parseIfcFile=d,e}return v(e,t),e}((function(t,e){var n=this;this.parseStepFile=i,this.generateStepEntityInstance=r,this.parseStepEntityInstanceAttributes=s,this.lines=t,this.entityInstances={},this.requiredEntities=e.requiredEntities,this.selectedEntities=e.selectedEntities,this.selectedPropertySets=e.selectedPropertySets,this.allEntities=e.allEntities,Object.values(e.requiredEntities).forEach((function(t){var e;Object.assign(n.entityInstances,((e={})[t]={},e))})),Object.assign(this.entityInstances,{genericEntityInstances:{}})}))}},e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}return n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(847)})();